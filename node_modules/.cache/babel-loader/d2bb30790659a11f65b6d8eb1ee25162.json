{"remainingRequest":"/Users/zhangsir/Desktop/muise/node_modules/babel-loader/lib/index.js!/Users/zhangsir/Desktop/muise/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhangsir/Desktop/muise/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangsir/Desktop/muise/src/base/progress-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangsir/Desktop/muise/src/base/progress-bar.vue","mtime":1592641032487},{"path":"/Users/zhangsir/Desktop/muise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangsir/Desktop/muise/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhangsir/Desktop/muise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangsir/Desktop/muise/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { prefixStyle, toCurrentRem } from \"@/utils\";\nvar transform = prefixStyle(\"transform\");\nexport default {\n  name: \"ProgressBar\",\n  props: {\n    percent: {\n      type: Number,\n      default: 0\n    },\n    alwaysShowBtn: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created: function created() {\n    this.touch = {};\n  },\n  mounted: function mounted() {\n    if (this.percent > 0) {\n      this.setProgressOffset(this.percent);\n    }\n  },\n  methods: {\n    progressClick: function progressClick(e) {\n      if (!this.disabled) {\n        var rect = this.$refs.progressBar.getBoundingClientRect();\n        var offsetWidth = Math.max(0, Math.min(e.pageX - rect.left, this.$refs.progressBar.clientWidth));\n\n        this._offset(offsetWidth); // 这里当我们点击 progressBtn 的时候，e.offsetX 获取不对\n        // this._offset(e.offsetX)\n\n\n        this._triggerPercent();\n      }\n    },\n    setProgressOffset: function setProgressOffset(percent) {\n      if (percent >= 0 && !this.touch.initiated) {\n        var barWidth = this.$refs.progressBar.clientWidth;\n        var offsetWidth = percent * barWidth;\n\n        this._offset(offsetWidth);\n      }\n    },\n    _triggerPercent: function _triggerPercent() {\n      this.$emit(\"percentChange\", this._getPercent());\n    },\n    _offset: function _offset(offsetWidth) {\n      var offsetRem = toCurrentRem(offsetWidth);\n      this.$refs.progress.style.width = \"\".concat(offsetRem);\n      this.$refs.progressBtn.style[transform] = \"translate3d(\".concat(offsetRem, \",0,0)\");\n    },\n    _getPercent: function _getPercent() {\n      var barWidth = this.$refs.progressBar.clientWidth;\n      return this.$refs.progress.clientWidth / barWidth;\n    }\n  },\n  watch: {\n    percent: function percent(newPercent) {\n      this.setProgressOffset(newPercent);\n    }\n  }\n};",{"version":3,"sources":["progress-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAA,WAAA,EAAA,YAAA,QAAA,SAAA;AAEA,IAAA,SAAA,GAAA,WAAA,CAAA,WAAA,CAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,aAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AATA,GAFA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,SAAA,KAAA,GAAA,EAAA;AACA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,QAAA,KAAA,OAAA,GAAA,CAAA,EAAA;AACA,WAAA,iBAAA,CAAA,KAAA,OAAA;AACA;AACA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,CADA,EACA;AACA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,KAAA,CAAA,WAAA,CAAA,qBAAA,EAAA;AACA,YAAA,WAAA,GAAA,IAAA,CAAA,GAAA,CACA,CADA,EAEA,IAAA,CAAA,GAAA,CAAA,CAAA,CAAA,KAAA,GAAA,IAAA,CAAA,IAAA,EAAA,KAAA,KAAA,CAAA,WAAA,CAAA,WAAA,CAFA,CAAA;;AAIA,aAAA,OAAA,CAAA,WAAA,EANA,CAOA;AACA;;;AACA,aAAA,eAAA;AACA;AACA,KAbA;AAcA,IAAA,iBAdA,6BAcA,OAdA,EAcA;AACA,UAAA,OAAA,IAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,SAAA,EAAA;AACA,YAAA,QAAA,GAAA,KAAA,KAAA,CAAA,WAAA,CAAA,WAAA;AACA,YAAA,WAAA,GAAA,OAAA,GAAA,QAAA;;AACA,aAAA,OAAA,CAAA,WAAA;AACA;AACA,KApBA;AAqBA,IAAA,eArBA,6BAqBA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,KAAA,WAAA,EAAA;AACA,KAvBA;AAwBA,IAAA,OAxBA,mBAwBA,WAxBA,EAwBA;AACA,UAAA,SAAA,GAAA,YAAA,CAAA,WAAA,CAAA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,aAAA,SAAA;AACA,WAAA,KAAA,CAAA,WAAA,CAAA,KAAA,CAAA,SAAA,0BAAA,SAAA;AACA,KA5BA;AA6BA,IAAA,WA7BA,yBA6BA;AACA,UAAA,QAAA,GAAA,KAAA,KAAA,CAAA,WAAA,CAAA,WAAA;AACA,aAAA,KAAA,KAAA,CAAA,QAAA,CAAA,WAAA,GAAA,QAAA;AACA;AAhCA,GAxBA;AA0DA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,UADA,EACA;AACA,WAAA,iBAAA,CAAA,UAAA;AACA;AAHA;AA1DA,CAAA","sourcesContent":["<template>\n  <div\n    @click=\"progressClick\"\n    class=\"progress-bar\"\n    ref=\"progressBar\"\n  >\n    <div class=\"bar-inner\">\n      <div\n        class=\"progress\"\n        ref=\"progress\"\n      ></div>\n      <div\n        class=\"progress-btn-wrapper\"\n        ref=\"progressBtn\"\n      >\n        <div\n          :class=\"{show: alwaysShowBtn}\"\n          class=\"progress-btn\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport { prefixStyle, toCurrentRem } from \"@/utils\"\n\nconst transform = prefixStyle(\"transform\")\n\nexport default {\n  name: \"ProgressBar\",\n  props: {\n    percent: {\n      type: Number,\n      default: 0\n    },\n    alwaysShowBtn: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {\n    this.touch = {}\n  },\n  mounted() {\n    if (this.percent > 0) {\n      this.setProgressOffset(this.percent)\n    }\n  },\n  methods: {\n    progressClick(e) {\n      if (!this.disabled) {\n        const rect = this.$refs.progressBar.getBoundingClientRect()\n        const offsetWidth = Math.max(\n          0,\n          Math.min(e.pageX - rect.left, this.$refs.progressBar.clientWidth)\n        )\n        this._offset(offsetWidth)\n        // 这里当我们点击 progressBtn 的时候，e.offsetX 获取不对\n        // this._offset(e.offsetX)\n        this._triggerPercent()\n      }\n    },\n    setProgressOffset(percent) {\n      if (percent >= 0 && !this.touch.initiated) {\n        const barWidth = this.$refs.progressBar.clientWidth\n        const offsetWidth = percent * barWidth\n        this._offset(offsetWidth)\n      }\n    },\n    _triggerPercent() {\n      this.$emit(\"percentChange\", this._getPercent())\n    },\n    _offset(offsetWidth) {\n      const offsetRem = toCurrentRem(offsetWidth)\n      this.$refs.progress.style.width = `${offsetRem}`\n      this.$refs.progressBtn.style[transform] = `translate3d(${offsetRem},0,0)`\n    },\n    _getPercent() {\n      const barWidth = this.$refs.progressBar.clientWidth\n      return this.$refs.progress.clientWidth / barWidth\n    }\n  },\n  watch: {\n    percent(newPercent) {\n      this.setProgressOffset(newPercent)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.progress-bar {\n  height: 30px;\n  cursor: pointer;\n\n  .bar-inner {\n    position: relative;\n    top: 14px;\n    height: 2px;\n    background: var(--progress-bgcolor);\n\n    .progress {\n      position: absolute;\n      height: 100%;\n      background: $theme-color;\n    }\n\n    .progress-btn-wrapper {\n      position: absolute;\n      left: -15px;\n      top: -13px;\n      width: 30px;\n      height: 30px;\n\n      .progress-btn {\n        display: none;\n        position: relative;\n        top: 8px;\n        left: 9px;\n        box-sizing: border-box;\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: $theme-color;\n\n        &.show {\n          display: block;\n        }\n      }\n    }\n  }\n\n  &:hover {\n    .progress-btn {\n      display: block !important;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/base"}]}