{"remainingRequest":"/Users/zhangsir/Desktop/muise/node_modules/babel-loader/lib/index.js!/Users/zhangsir/Desktop/muise/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhangsir/Desktop/muise/src/utils/business.js","dependencies":[{"path":"/Users/zhangsir/Desktop/muise/src/utils/business.js","mtime":1592641032498},{"path":"/Users/zhangsir/Desktop/muise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangsir/Desktop/muise/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhangsir/Desktop/muise/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"regenerator-runtime/runtime\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _asyncToGenerator from \"/Users/zhangsir/Desktop/muise/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/zhangsir/Desktop/muise/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\nimport _objectWithoutProperties from \"/Users/zhangsir/Desktop/muise/node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\n * 业务工具方法\n */\nimport { getAlbum, getMvDetail } from \"@/api\";\nimport router from '@/router';\nimport { isDef, notify } from \"./common\";\nexport function createSong(song) {\n  var id = song.id,\n      name = song.name,\n      img = song.img,\n      artists = song.artists,\n      duration = song.duration,\n      albumId = song.albumId,\n      albumName = song.albumName,\n      mvId = song.mvId,\n      rest = _objectWithoutProperties(song, [\"id\", \"name\", \"img\", \"artists\", \"duration\", \"albumId\", \"albumName\", \"mvId\"]);\n\n  return _objectSpread({\n    id: id,\n    name: name,\n    img: img,\n    artists: artists,\n    duration: duration,\n    albumName: albumName,\n    url: genSongPlayUrl(song.id),\n    artistsText: genArtistisText(artists),\n    durationSecond: duration / 1000,\n    // 专辑 如果需要额外请求封面的话必须加上\n    albumId: albumId,\n    // mv的id 如果有的话 会在songTable组件中加上mv链接。\n    mvId: mvId\n  }, rest);\n}\nexport function getSongImg(_x, _x2) {\n  return _getSongImg.apply(this, arguments);\n}\n\nfunction _getSongImg() {\n  _getSongImg = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee(id, albumId) {\n    var _ref2, songs, _ref3, picUrl;\n\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (isDef(albumId)) {\n              _context.next = 2;\n              break;\n            }\n\n            throw new Error('need albumId');\n\n          case 2:\n            _context.next = 4;\n            return getAlbum(albumId);\n\n          case 4:\n            _ref2 = _context.sent;\n            songs = _ref2.songs;\n            _ref3 = songs.find(function (_ref4) {\n              var songId = _ref4.id;\n              return songId === id;\n            }) || {}, picUrl = _ref3.al.picUrl;\n            return _context.abrupt(\"return\", picUrl);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getSongImg.apply(this, arguments);\n}\n\nexport function genArtistisText(artists) {\n  return (artists || []).map(function (_ref) {\n    var name = _ref.name;\n    return name;\n  }).join('/');\n} // 有时候虽然有mvId 但是请求却404 所以跳转前先请求一把\n\nexport function goMvWithCheck(_x3) {\n  return _goMvWithCheck.apply(this, arguments);\n}\n\nfunction _goMvWithCheck() {\n  _goMvWithCheck = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee2(id) {\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return getMvDetail(id);\n\n          case 3:\n            goMv(id);\n            _context2.next = 9;\n            break;\n\n          case 6:\n            _context2.prev = 6;\n            _context2.t0 = _context2[\"catch\"](0);\n            notify(\"mv获取失败\");\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 6]]);\n  }));\n  return _goMvWithCheck.apply(this, arguments);\n}\n\nexport function goMv(id) {\n  router.push(\"/mv/\".concat(id));\n}\n\nfunction genSongPlayUrl(id) {\n  return \"https://music.163.com/song/media/outer/url?id=\".concat(id, \".mp3\");\n}",{"version":3,"sources":["/Users/zhangsir/Desktop/muise/src/utils/business.js"],"names":["getAlbum","getMvDetail","router","isDef","notify","createSong","song","id","name","img","artists","duration","albumId","albumName","mvId","rest","url","genSongPlayUrl","artistsText","genArtistisText","durationSecond","getSongImg","Error","songs","find","songId","picUrl","al","map","join","goMvWithCheck","goMv","push"],"mappings":";;;;;;;;;;;;;;AAAA;;;AAGA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,KAAT,EAAgBC,MAAhB;AAEA,OAAO,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AAAA,MACvBC,EADuB,GACgDD,IADhD,CACvBC,EADuB;AAAA,MACnBC,IADmB,GACgDF,IADhD,CACnBE,IADmB;AAAA,MACbC,GADa,GACgDH,IADhD,CACbG,GADa;AAAA,MACRC,OADQ,GACgDJ,IADhD,CACRI,OADQ;AAAA,MACCC,QADD,GACgDL,IADhD,CACCK,QADD;AAAA,MACWC,OADX,GACgDN,IADhD,CACWM,OADX;AAAA,MACoBC,SADpB,GACgDP,IADhD,CACoBO,SADpB;AAAA,MAC8BC,IAD9B,GACgDR,IADhD,CAC8BQ,IAD9B;AAAA,MACuCC,IADvC,4BACgDT,IADhD;;AAG/B;AACEC,IAAAA,EAAE,EAAFA,EADF;AAEEC,IAAAA,IAAI,EAAJA,IAFF;AAGEC,IAAAA,GAAG,EAAHA,GAHF;AAIEC,IAAAA,OAAO,EAAPA,OAJF;AAKEC,IAAAA,QAAQ,EAARA,QALF;AAMEE,IAAAA,SAAS,EAATA,SANF;AAOEG,IAAAA,GAAG,EAAEC,cAAc,CAACX,IAAI,CAACC,EAAN,CAPrB;AAQEW,IAAAA,WAAW,EAAEC,eAAe,CAACT,OAAD,CAR9B;AASEU,IAAAA,cAAc,EAAET,QAAQ,GAAG,IAT7B;AAUE;AACAC,IAAAA,OAAO,EAAPA,OAXF;AAYE;AACAE,IAAAA,IAAI,EAAJA;AAbF,KAcKC,IAdL;AAgBD;AAED,gBAAsBM,UAAtB;AAAA;AAAA;;;;;0BAAO,iBAA0Bd,EAA1B,EAA8BK,OAA9B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,gBACAT,KAAK,CAACS,OAAD,CADL;AAAA;AAAA;AAAA;;AAAA,kBAEG,IAAIU,KAAJ,CAAU,cAAV,CAFH;;AAAA;AAAA;AAAA,mBAImBtB,QAAQ,CAACY,OAAD,CAJ3B;;AAAA;AAAA;AAIGW,YAAAA,KAJH,SAIGA,KAJH;AAAA,oBAODA,KAAK,CAACC,IAAN,CAAW;AAAA,kBAAOC,MAAP,SAAGlB,EAAH;AAAA,qBAAoBkB,MAAM,KAAKlB,EAA/B;AAAA,aAAX,KAAiD,EAPhD,EAMGmB,MANH,SAMHC,EANG,CAMGD,MANH;AAAA,6CAQEA,MARF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAWP,OAAO,SAASP,eAAT,CAAyBT,OAAzB,EAAkC;AACvC,SAAO,CAACA,OAAO,IAAI,EAAZ,EAAgBkB,GAAhB,CAAoB;AAAA,QAAGpB,IAAH,QAAGA,IAAH;AAAA,WAAcA,IAAd;AAAA,GAApB,EAAwCqB,IAAxC,CAA6C,GAA7C,CAAP;AACD,C,CAED;;AACA,gBAAsBC,aAAtB;AAAA;AAAA;;;;;0BAAO,kBAA6BvB,EAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEGN,WAAW,CAACM,EAAD,CAFd;;AAAA;AAGHwB,YAAAA,IAAI,CAACxB,EAAD,CAAJ;AAHG;AAAA;;AAAA;AAAA;AAAA;AAKHH,YAAAA,MAAM,CAAC,QAAD,CAAN;;AALG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AASP,OAAO,SAAS2B,IAAT,CAAcxB,EAAd,EAAkB;AACvBL,EAAAA,MAAM,CAAC8B,IAAP,eAAmBzB,EAAnB;AACD;;AAED,SAASU,cAAT,CAAwBV,EAAxB,EAA4B;AAC1B,iEAAwDA,EAAxD;AACD","sourcesContent":["/**\n * 业务工具方法\n */\nimport { getAlbum, getMvDetail } from \"@/api\"\nimport router from '@/router'\nimport { isDef, notify } from './common';\n\nexport function createSong(song) {\n  const { id, name, img, artists, duration, albumId, albumName,mvId, ...rest } = song\n\n  return {\n    id,\n    name,\n    img,\n    artists,\n    duration,\n    albumName,\n    url: genSongPlayUrl(song.id),\n    artistsText: genArtistisText(artists),\n    durationSecond: duration / 1000,\n    // 专辑 如果需要额外请求封面的话必须加上\n    albumId,\n    // mv的id 如果有的话 会在songTable组件中加上mv链接。\n    mvId,\n    ...rest\n  }\n}\n\nexport async function getSongImg(id, albumId) {\n  if (!isDef(albumId)) {\n    throw new Error('need albumId')\n  }\n  const { songs } = await getAlbum(albumId)\n  const {\n    al: { picUrl }\n  } = songs.find(({ id: songId }) => songId === id) || {}\n  return picUrl\n}\n\nexport function genArtistisText(artists) {\n  return (artists || []).map(({ name }) => name).join('/')\n}\n\n// 有时候虽然有mvId 但是请求却404 所以跳转前先请求一把\nexport async function goMvWithCheck(id) {\n  try {\n    await getMvDetail(id)\n    goMv(id)\n  } catch (error) {\n    notify(\"mv获取失败\")\n  }\n}\n\nexport function goMv(id) {\n  router.push(`/mv/${id}`) \n}\n\nfunction genSongPlayUrl(id) {\n  return `https://music.163.com/song/media/outer/url?id=${id}.mp3`\n}"]}]}