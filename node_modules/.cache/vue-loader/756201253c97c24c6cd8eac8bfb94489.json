{"remainingRequest":"/Users/zhangsir/Desktop/ymyu/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangsir/Desktop/ymyu/src/base/progress-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhangsir/Desktop/ymyu/src/base/progress-bar.vue","mtime":1592641032487},{"path":"/Users/zhangsir/Desktop/ymyu/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhangsir/Desktop/ymyu/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangsir/Desktop/ymyu/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { prefixStyle, toCurrentRem } from \"@/utils\"\n\nconst transform = prefixStyle(\"transform\")\n\nexport default {\n  name: \"ProgressBar\",\n  props: {\n    percent: {\n      type: Number,\n      default: 0\n    },\n    alwaysShowBtn: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {\n    this.touch = {}\n  },\n  mounted() {\n    if (this.percent > 0) {\n      this.setProgressOffset(this.percent)\n    }\n  },\n  methods: {\n    progressClick(e) {\n      if (!this.disabled) {\n        const rect = this.$refs.progressBar.getBoundingClientRect()\n        const offsetWidth = Math.max(\n          0,\n          Math.min(e.pageX - rect.left, this.$refs.progressBar.clientWidth)\n        )\n        this._offset(offsetWidth)\n        // 这里当我们点击 progressBtn 的时候，e.offsetX 获取不对\n        // this._offset(e.offsetX)\n        this._triggerPercent()\n      }\n    },\n    setProgressOffset(percent) {\n      if (percent >= 0 && !this.touch.initiated) {\n        const barWidth = this.$refs.progressBar.clientWidth\n        const offsetWidth = percent * barWidth\n        this._offset(offsetWidth)\n      }\n    },\n    _triggerPercent() {\n      this.$emit(\"percentChange\", this._getPercent())\n    },\n    _offset(offsetWidth) {\n      const offsetRem = toCurrentRem(offsetWidth)\n      this.$refs.progress.style.width = `${offsetRem}`\n      this.$refs.progressBtn.style[transform] = `translate3d(${offsetRem},0,0)`\n    },\n    _getPercent() {\n      const barWidth = this.$refs.progressBar.clientWidth\n      return this.$refs.progress.clientWidth / barWidth\n    }\n  },\n  watch: {\n    percent(newPercent) {\n      this.setProgressOffset(newPercent)\n    }\n  }\n}\n",{"version":3,"sources":["progress-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"progress-bar.vue","sourceRoot":"src/base","sourcesContent":["<template>\n  <div\n    @click=\"progressClick\"\n    class=\"progress-bar\"\n    ref=\"progressBar\"\n  >\n    <div class=\"bar-inner\">\n      <div\n        class=\"progress\"\n        ref=\"progress\"\n      ></div>\n      <div\n        class=\"progress-btn-wrapper\"\n        ref=\"progressBtn\"\n      >\n        <div\n          :class=\"{show: alwaysShowBtn}\"\n          class=\"progress-btn\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport { prefixStyle, toCurrentRem } from \"@/utils\"\n\nconst transform = prefixStyle(\"transform\")\n\nexport default {\n  name: \"ProgressBar\",\n  props: {\n    percent: {\n      type: Number,\n      default: 0\n    },\n    alwaysShowBtn: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {\n    this.touch = {}\n  },\n  mounted() {\n    if (this.percent > 0) {\n      this.setProgressOffset(this.percent)\n    }\n  },\n  methods: {\n    progressClick(e) {\n      if (!this.disabled) {\n        const rect = this.$refs.progressBar.getBoundingClientRect()\n        const offsetWidth = Math.max(\n          0,\n          Math.min(e.pageX - rect.left, this.$refs.progressBar.clientWidth)\n        )\n        this._offset(offsetWidth)\n        // 这里当我们点击 progressBtn 的时候，e.offsetX 获取不对\n        // this._offset(e.offsetX)\n        this._triggerPercent()\n      }\n    },\n    setProgressOffset(percent) {\n      if (percent >= 0 && !this.touch.initiated) {\n        const barWidth = this.$refs.progressBar.clientWidth\n        const offsetWidth = percent * barWidth\n        this._offset(offsetWidth)\n      }\n    },\n    _triggerPercent() {\n      this.$emit(\"percentChange\", this._getPercent())\n    },\n    _offset(offsetWidth) {\n      const offsetRem = toCurrentRem(offsetWidth)\n      this.$refs.progress.style.width = `${offsetRem}`\n      this.$refs.progressBtn.style[transform] = `translate3d(${offsetRem},0,0)`\n    },\n    _getPercent() {\n      const barWidth = this.$refs.progressBar.clientWidth\n      return this.$refs.progress.clientWidth / barWidth\n    }\n  },\n  watch: {\n    percent(newPercent) {\n      this.setProgressOffset(newPercent)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.progress-bar {\n  height: 30px;\n  cursor: pointer;\n\n  .bar-inner {\n    position: relative;\n    top: 14px;\n    height: 2px;\n    background: var(--progress-bgcolor);\n\n    .progress {\n      position: absolute;\n      height: 100%;\n      background: $theme-color;\n    }\n\n    .progress-btn-wrapper {\n      position: absolute;\n      left: -15px;\n      top: -13px;\n      width: 30px;\n      height: 30px;\n\n      .progress-btn {\n        display: none;\n        position: relative;\n        top: 8px;\n        left: 9px;\n        box-sizing: border-box;\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: $theme-color;\n\n        &.show {\n          display: block;\n        }\n      }\n    }\n  }\n\n  &:hover {\n    .progress-btn {\n      display: block !important;\n    }\n  }\n}\n</style>\n"]}]}